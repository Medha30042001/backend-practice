
CREATE TABLE members (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  full_name TEXT NOT NULL,
  email TEXT NOT NULL UNIQUE,
  membership_type TEXT NOT NULL CHECK (membership_type IN ('standard', 'premium')),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)

CREATE TABLE books (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title TEXT NOT NULL,
  author TEXT NOT NULL,
  category TEXT NOT NULL,
  available_copies INTEGER NOT NULL CHECK (available_copies >= 0),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)

CREATE TABLE borrowings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  member_id UUID REFERENCES members(id) ON DELETE CASCADE,
  book_id UUID REFERENCES books(id),
  borrow_date DATE NOT NULL,
  return_date DATE,
  status TEXT DEFAULT 'borrowed' CHECK(status IN ('borrowed', 'returned')),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)